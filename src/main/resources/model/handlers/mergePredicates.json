{
  "name": "MergePredicates",
  "tooltip": "A `MergePredicates` defines a set of single value predicates on a set of subjects which can be merged automatically.<br>Restrictions can be placed on the origin and nature of the changes, and a general condition can be evaluated first.",
  "attributes": {
    "subjects": {
      "description": "ODT query",
      "tooltip": "The subjects to which the handler applies",
      "type": "query",
      "node": "scalar",
      "required": true
    },
    "predicates": {
      "description": "ODT query",
      "tooltip": "The predicates for which changes can be merged.<br>NOTE: These may only be single value predicates.",
      "type": "query",
      "single-value": true,
      "node": "scalar",
      "required": true
    },
    "when": {
      "description": "ODT query",
      "tooltip": "An additional condition for merging",
      "type": "boolean",
      "node": "scalar"
    },
    "from": {
      "node": "value",
      "required": true,
      "tooltip": "The origin of the changes",
      "description": "both | parent",
      "values": {
        "parent": "only merge changes from the parent (e.g. the server)",
        "both": "changes from the parent and/or the current transaction"
      }
    },
    "use": {
      "availableWhen": [
        "siblingValues:[^|]*from:both"
      ],
      "description": "current | parent",
      "tooltip": "Which changes to pick in case the value was changed on both sides.",
      "availableWhenDescription": "Only available when 'from' is 'both'",
      "node": "value",
      "values": {
        "parent": "use the parent",
        "current": "use current"
      },
      "required": true
    },
    "type": {
      "node": "value",
      "description": "create | delete | update",
      "tooltip": "The nature of the changes",
      "values": {
        "create": "the predicate is newly added to the subject",
        "delete": "the predicate has been removed from the subject",
        "update": "the predicate existed before and still does, and the value has changed;<br>   `update` allows `create` and `delete` type changes too"
      },
      "required": true
    }
  }
}
